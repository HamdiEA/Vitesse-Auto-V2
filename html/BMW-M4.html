<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMW M4 F82 - Vitesse-Auto</title>
    <meta name="description" content="Louez le BMW M4 F82 - Un coupé sportif haute performance. 425 ch, transmission manuelle ou DCT. Expérience de conduite exceptionnelle.">
    <link rel="stylesheet" href="../styles/modern.css">
    <link rel="icon" href="../images/logo.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
  <body>
    <!-- Modern Navigation -->
    <nav class="navbar-modern" id="navbar">
      <div class="nav-container">
        <div class="logo-container">
          <img src="../images/logo.png" alt="Vitesse-Auto Logo" class="logo">
          <a href="index.html" class="brand-name">Vitesse-Auto</a>
        </div>
        
        <ul class="nav-menu">
          <li><a href="index.html" class="nav-link">Accueil</a></li>
          <li><a href="bmw.html" class="nav-link">BMW</a></li>
          <li><a href="Audi.html" class="nav-link">Audi</a></li>
          <li><a href="vw.html" class="nav-link">Volkswagen</a></li>
          <li><a href="contact.html" class="nav-link">Contact</a></li>
        </ul>
        
        <button class="mobile-menu-toggle" id="mobileMenuToggle">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </nav>

    <!-- Car Detail Hero Section -->
    <section class="car-detail">
      <div class="container-modern">
        <div class="car-hero">
          <div class="car-images">
            <div class="carousel-modern">
              <div class="carousel-inner" id="carCarousel">
                <div class="carousel-item active">
                  <img src="../images/M4-front.jpg" alt="BMW M4 Avant">
                </div>
                <div class="carousel-item">
                  <img src="../images/M4-dashbored.jpg" alt="BMW M4 Tableau de bord">
                </div>
                <div class="carousel-item">
                  <img src="../images/M4-up.jpg" alt="BMW M4 Dessus">
                </div>
              </div>
            </div>
          </div>
          
          <div class="car-info">
            <h1 class="car-title">BMW M4 F82</h1>
            <p class="car-description">
              Le BMW M4 F82 est un coupé sportif haute performance qui allie luxe et performances exceptionnelles. 
              Équipé du moteur S55 bi-turbo de 3.0L développant 425 ch, il offre une expérience de conduite inoubliable. 
              Idéal pour la conduite sportive et les voyages haut de gamme.
            </p>
            
            <div class="car-price mb-4">
              <span class="text-light opacity-8">À partir de</span><br>
              <span id="carPrice" class="text-primary" style="font-size: 2.5rem; font-weight: 700;">€259/jour</span>
            </div>
            
            <div class="mb-4">
              <span id="availabilityStatus" class="status-badge status-available">
                <i class="fas fa-check-circle mr-2"></i>Disponible
              </span>
            </div>
            
            <div class="d-flex gap-3">
              <button id="rentalBtn" class="btn-modern btn-primary" onclick="handleRental()">
                <i class="fas fa-car mr-2"></i>Louer maintenant
              </button>
              <a href="contact.html" class="btn-modern btn-outline">
                <i class="fas fa-phone mr-2"></i>Nous contacter
              </a>
            </div>
          </div>
        </div>

        <!-- Detailed Specifications -->
        <div class="car-specs">
          <h2 class="text-light mb-4 text-center">Caractéristiques Techniques</h2>
          
          <div class="specs-grid">
            <div class="spec-item">
              <div class="spec-label">
                <i class="fas fa-engine-warning mr-2"></i>Moteur
              </div>
              <div class="spec-value">3.0L 6 cylindres en ligne bi-turbo (S55)</div>
            </div>
            
            <div class="spec-item">
              <div class="spec-label">
                <i class="fas fa-tachometer-alt mr-2"></i>Puissance
              </div>
              <div class="spec-value">425 ch (standard) / 444 ch (Competition) / 503 ch (CS)</div>
            </div>
            
            <div class="spec-item">
              <div class="spec-label">
                <i class="fas fa-bolt mr-2"></i>Couple
              </div>
              <div class="spec-value">550 Nm (standard & Competition) / 600 Nm (CS)</div>
            </div>
            
            <div class="spec-item">
              <div class="spec-label">
                <i class="fas fa-cogs mr-2"></i>Transmission
              </div>
              <div class="spec-value">Manuelle à 6 rapports ou Automatique à 7 rapports (DCT)</div>
            </div>
            
            <div class="spec-item">
              <div class="spec-label">
                <i class="fas fa-road mr-2"></i>Traction
              </div>
              <div class="spec-value">Propulsion (RWD)</div>
            </div>
            
            <div class="spec-item">
              <div class="spec-label">
                <i class="fas fa-gas-pump mr-2"></i>Consommation
              </div>
              <div class="spec-value">~11 L/100 km en ville / ~8 L/100 km sur autoroute</div>
            </div>
          </div>
        </div>

        <!-- Features Section -->
        <div class="car-specs mt-4">
          <h3 class="text-light mb-4">
            <i class="fas fa-star mr-2 text-primary"></i>Équipements et Technologies
          </h3>
          
          <div class="row">
            <div class="col-md-6 mb-4">
              <h4 class="text-primary mb-3">Intérieur & Confort</h4>
              <ul class="car-card-features">
                <li><i class="fas fa-check text-success mr-2"></i>Places : 4 passagers (Coupé)</li>
                <li><i class="fas fa-check text-success mr-2"></i>Infodivertissement : Écran central avec BMW iDrive</li>
                <li><i class="fas fa-check text-success mr-2"></i>Connectivité : Apple CarPlay, Bluetooth, Navigation GPS</li>
                <li><i class="fas fa-check text-success mr-2"></i>Confort : Sièges sport en cuir, fibre de carbone</li>
                <li><i class="fas fa-check text-success mr-2"></i>Éclairage d'ambiance personnalisé</li>
              </ul>
            </div>
            
            <div class="col-md-6 mb-4">
              <h4 class="text-primary mb-3">Sécurité & Assistance</h4>
              <ul class="car-card-features">
                <li><i class="fas fa-shield-alt text-success mr-2"></i>Régulateur de vitesse adaptatif</li>
                <li><i class="fas fa-shield-alt text-success mr-2"></i>Alerte de franchissement de ligne</li>
                <li><i class="fas fa-shield-alt text-success mr-2"></i>Freinage haute performance M</li>
                <li><i class="fas fa-shield-alt text-success mr-2"></i>Assistance au stationnement</li>
                <li><i class="fas fa-shield-alt text-success mr-2"></i>Caméra de recul et capteurs</li>
              </ul>
            </div>
          </div>
          
          <div class="row">
            <div class="col-12">
              <h4 class="text-primary mb-3">Catégorie & Recommandation</h4>
              <p class="text-light opacity-8 mb-2">
                <strong>Catégorie :</strong> Luxe / Coupé sportif
              </p>
              <p class="text-light opacity-8">
                <strong>Idéal pour :</strong> Conduite sportive, sensations fortes, voyages haut de gamme, 
                occasions spéciales, week-ends passionnés.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Modern Footer -->
    <footer class="footer-modern">
      <div class="footer-content">
        <div class="footer-logo">
          <img src="../images/logo.png" alt="Vitesse-Auto" class="logo mb-3">
        </div>
        
        <div class="footer-links">
          <a href="index.html" class="footer-link">Accueil</a>
          <a href="bmw.html" class="footer-link">BMW</a>
          <a href="Audi.html" class="footer-link">Audi</a>
          <a href="vw.html" class="footer-link">Volkswagen</a>
          <a href="contact.html" class="footer-link">Contact</a>
        </div>
        
        <div class="footer-copyright">
          <p>&copy; 2025 Vitesse-Auto - Tous droits réservés</p>
        </div>
      </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Carousel functionality
        let currentSlide = 0;
        const carousel = document.getElementById('carCarousel');
        const slides = carousel.getElementsByClassName('carousel-item');
        
        function showSlide(index) {
            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.remove('active');
            }
            slides[index].classList.add('active');
        }
        
        function nextSlide() {
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }
        
        // Auto-advance carousel
        setInterval(nextSlide, 4000);
        
        // Currency conversion and availability check
        const modelName = 'BMW-M4';
        let carData = null;
        
        async function initializePage() {
            try {
                // Load car data
                const response = await fetch(`/api/car/${modelName}`);
                carData = await response.json();
                
                // Update price with currency conversion
                await updatePrice();
                
                // Check availability
                await checkAvailability();
                
            } catch (error) {
                console.error('Error initializing page:', error);
            }
        }
        
        async function updatePrice() {
            const basePrice = carData ? carData.price : 259;
            let currency = 'EUR';
            let rate = 1;
            
            try {
                // Get user location for currency
                const ipRes = await fetch('https://api64.ipify.org?format=json');
                const ipData = await ipRes.json();
                
                const locRes = await fetch(`https://api.ipgeolocation.io/ipgeo?apiKey=bd57c90ff4f3451c8a9ae1ab99947b9b&ip=${ipData.ip}`);
                const locData = await locRes.json();
                
                currency = locData.currency?.code || 'EUR';
                
                // Get exchange rate
                const exRes = await fetch(`https://api.currencyapi.com/v3/latest?apikey=cur_live_QnyNOtnqT8Dtxi3L8QlQquSJlNUFQKhwcrpOPQ0Q&currencies=${currency}&base_currency=EUR`);
                const exData = await exRes.json();
                rate = exData.data[currency]?.value || 1;
                
            } catch (error) {
                console.error('Currency conversion error:', error);
            }
            
            const finalPrice = Math.round(basePrice * rate);
            document.getElementById('carPrice').textContent = `${finalPrice} ${currency}/jour`;
        }
        
        async function checkAvailability() {
            const availabilityStatus = document.getElementById('availabilityStatus');
            const rentalBtn = document.getElementById('rentalBtn');
            
            try {
                const response = await fetch(`/api/car?model=${modelName}`);
                const data = await response.json();
                
                if (data.available) {
                    availabilityStatus.className = 'status-badge status-available';
                    availabilityStatus.innerHTML = '<i class="fas fa-check-circle mr-2"></i>Disponible';
                    rentalBtn.disabled = false;
                    rentalBtn.className = 'btn-modern btn-primary';
                } else {
                    availabilityStatus.className = 'status-badge status-unavailable';
                    availabilityStatus.innerHTML = '<i class="fas fa-times-circle mr-2"></i>Non disponible';
                    rentalBtn.disabled = true;
                    rentalBtn.className = 'btn-modern btn-danger';
                    rentalBtn.innerHTML = '<i class="fas fa-times mr-2"></i>Non disponible';
                }
                
            } catch (error) {
                console.error('Availability check error:', error);
                availabilityStatus.className = 'status-badge status-unavailable';
                availabilityStatus.innerHTML = '<i class="fas fa-exclamation-circle mr-2"></i>Information non disponible';
                rentalBtn.disabled = true;
                rentalBtn.className = 'btn-modern btn-danger';
            }
        }
        
        function handleRental() {
            window.location.href = 'forum.html';
        }
        
        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });
        
        // Mobile menu toggle
        document.getElementById('mobileMenuToggle').addEventListener('click', function() {
            const navMenu = document.querySelector('.nav-menu');
            navMenu.style.display = navMenu.style.display === 'flex' ? 'none' : 'flex';
            navMenu.style.position = 'absolute';
            navMenu.style.top = '100%';
            navMenu.style.left = '0';
            navMenu.style.right = '0';
            navMenu.style.background = 'rgba(15, 23, 42, 0.98)';
            navMenu.style.flexDirection = 'column';
            navMenu.style.padding = '1rem';
        });
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
  </body>
</html>